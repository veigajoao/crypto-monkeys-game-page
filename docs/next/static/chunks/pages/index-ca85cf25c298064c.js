(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{78581:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(53678)}])},53678:function(t,e,n){"use strict";n.r(e);var r=n(34051),o=n.n(r),s=n(85893),c=n(67294),i=n(26709),a=n(85789),u=n(96987),l=n(33307),f=n(2711),h=n.n(f),p=n(44431),v=n.n(p);function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t,e,n,r,o,s,c){try{var i=t[s](c),a=i.value}catch(u){return void n(u)}i.done?e(a):Promise.resolve(a).then(r,o)}function w(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var s=t.apply(e,n);function c(t){d(s,r,o,c,i,"next",t)}function i(t){d(s,r,o,c,i,"throw",t)}c(void 0)}))}}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){return!e||"object"!==_(e)&&"function"!==typeof e?b(t):e}function P(t,e){return(P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function m(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=k(t);if(e){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}var C=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}(f,t);var e,n,r,c=m(f);function f(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(e=c.call(this,t)).state={isUserWallet:!1,web3:"",networkSuccess:!1,whitelistContract:!1,priceTokenContract:!1,allowance:"unset",activeAccount:"unset",fetchInProgress:!1},e.connectClientWallet.bind(b(e)),e.purchaseToken.bind(b(e)),e.closeModal.bind(b(e)),e}return e=f,(n=[{key:"connectClientWallet",value:function(){return w(o().mark((function t(){var e,n,r,s,c,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,i.U)();case 2:e=t.sent,n=e.isUserWallet,r=e.web3,s=e.networkSuccess,c=e.whitelistContract,a=e.priceTokenContract,this.setState({isUserWallet:n,web3:r,networkSuccess:s,whitelistContract:c,priceTokenContract:a}),this.state.isUserWallet||this.setState({fetchInProgress:"noMM"});case 10:case"end":return t.stop()}}),t,this)})).bind(this))()}},{key:"purchaseToken",value:function(t){return w(o().mark((function e(){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.isUserWallet){e.next=27;break}return n=this.state.web3.utils.toWei(v()(t).multipliedBy("0.065").toString()),r=this.state.web3.utils.toWei(t,"ether"),this.setState({fetchInProgress:"sendBlock"}),e.prev=4,e.next=7,this.state.priceTokenContract.methods.approve(this.state.whitelistContract.options.address,n).send({from:this.state.activeAccount});case 7:e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(4),this.setState({fetchInProgress:"tokenApprovalFailure"}),console.log(e.t0),e.abrupt("return","");case 14:return e.prev=14,e.next=17,this.state.whitelistContract.methods.buyTokens(r).send({gas:"1000000",from:this.state.activeAccount});case 17:e.next=24;break;case 19:return e.prev=19,e.t1=e.catch(14),this.setState({fetchInProgress:"whitelistBuyFailure"}),console.log(e.t1),e.abrupt("return","");case 24:this.setState({fetchInProgress:"justBought"}),e.next=28;break;case 27:this.setState({fetchInProgress:"noMM"});case 28:case"end":return e.stop()}}),e,this,[[4,9],[14,19]])})).bind(this))()}},{key:"closeModal",value:function(){return w(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.setState({fetchInProgress:!1});case 1:case"end":return t.stop()}}),t,this)})).bind(this))()}},{key:"componentDidMount",value:function(){h().init({duration:2e3})}},{key:"render",value:function(){var t=this;return(0,s.jsxs)(a.Z,{connectClientWallet:function(e){return t.connectClientWallet()},activeAccount:this.state.activeAccount,fetchInProgress:this.state.fetchInProgress,closeModal:function(e){return t.closeModal()},children:[(0,s.jsx)(u.Z,{}),(0,s.jsx)(l.Z,{isUserWallet:this.state.isUserWallet,purchaseFunction:function(e){return t.purchaseToken(e)}})]})}}])&&y(e.prototype,n),r&&y(e,r),f}(c.Component);e.default=C}},function(t){t.O(0,[482,714,901,388,774,888,179],(function(){return e=78581,t(t.s=e);var e}));var e=t.O();_N_E=e}]);